services:
  neo4j:
    image: neo4j:5.22
    container_name: kg-neo4j
    restart: unless-stopped
    ports:
      - "7474:7474"   # HTTP
      - "7687:7687"   # Bolt
    environment:
      - NEO4J_AUTH=neo4j/test1234
      - NEO4J_dbms_memory_heap_initial__size=1G
      - NEO4J_dbms_memory_heap_max__size=2G
      - NEO4J_dbms_memory_pagecache_size=1G
      - NEO4J_PLUGINS=["apoc"]
    volumes:
      - ./neo4j/data:/data
      - ./neo4j/logs:/logs
      - ./neo4j/plugins:/plugins
      - ../../schema:/var/lib/neo4j/import/schema

  # Optional RDF/SPARQL track (uncomment to enable)
  # fuseki:
  #   image: stain/jena-fuseki
  #   container_name: kg-fuseki
  #   restart: unless-stopped
  #   ports:
  #     - "3030:3030"
  #   environment:
  #     - ADMIN_PASSWORD=admin
  #   volumes:
  #     - ./fuseki:/fuseki
